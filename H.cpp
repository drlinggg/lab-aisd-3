/*▒▒▒▒▒▒▒░▒▒▒▒░░▒▒░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░▒▒▒░░▒▒▒▒▒▒░░
▒▒▒▒░▒▒▒░░░░░░░░░░▒▒▒▒░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░▒▒▒▒▒░░░▒▒░░░░░░░
▒▒▒▒▒░░░░▒▒░░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓▓▓▓▓▓▓▓▓▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░
▒▒▒▒▒▒░░▒▓▓▒▒▒░▒░▒▒▒▒▒▒▒▒▒▒▒▓▓▓▓▓▓▓▓▓▓▒▒▒▓▓▓▓▓▓▓▓▓▓▒▒▒▒▒▒▒▒▒▒▒▒▒░░▒▒▒▒░░░░▒▒▒▒░░
▒▒▒░░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▒▒▒▒▒▒▒▒░░▒▒▒▒▒▒▒▒▒▒░░▒░
▒▒░░░░░░░▒░░▒▒▒▒▒▒▒▒▒▒▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░▒▒░░░▒░
▒▒▒░░▒░░░░░▒░▒▒▒▒▒▒▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░▒▒
▒▒▒░░░░░░▒▒▒▒▒▒▒▒▒▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▒▒▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▒▒▒▒▒▒▒▒▒▒░▒▒▒░▒▒▒
▒▒▒░░░░░░▒▒▒▒▒▒▒▒▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒░░░░░▒▒▒▒▒▒▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▒▒▒▒▒▒▒▒▒▒░░░░▒▒▒
▒▒▒░▒░░▒▒░▒▒▒▒▒▒▒▒▓▓▓▓▓▓▓▓▓▓▓▓▒▒▒▒▒▒▒░░▒▒▒▒▒▒░░░▒▒▓▓▓▓▓▓▓▓▓▓▓▓▒▒▒▒▒▒▒▒▒▒▒▒░░▒▒▒▒
▒▒▒▒▒▒▒▒▒▒▒▓▒▒▒▒▓▓▒▓▓▓▓▓▓▓▓▓▓▒░▒▒▒▒▒▒░░▒░▒▒▒▒░░░░░▒▓▓▓▓▓▓▓▓▓▓▓▓▓▒▓▓▓▒▒▒▒░░░░▒▒▒▒
▒▒▒▒░▒▒▒▒▒▒▒▒▒▒▒▓▓▓▓▓▓▓▓▓▓▓▓░▒▒▒░░░░▒▒▓▓▓▓▒▒▒▒░▒▒░░░▓▓▓▓▓▓▓▓▓▓▓▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
▒▒▒░░░▒▒▒▓▓▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒░▒▒▒▒▒▓▓▓███▓▓▓▓▓▓▒▒▒▒▒░░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒░▒░░░▒▒▒
▒▒▒▒▒▒▒▒▒▒▓▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒░▒▒▒▒▓▓▓█████▓█▓▓▓▓▓▒▒▒░▒░▒▓▓▓▓▓▓▓▓▓▒▓▓▓▓▓▓▒▒▒▒▒▒▒▒▒▒
▒▓▓▒▒░░▒▒▒▓▓▒▓▓▓▓▓▓▓▓▓▓▓▓▓▒░░▒▒▒▓▓▓▓██████▓▓▓▓▓▒▒▒░░░▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▒▒▒▒▒▒▒
▒▓▒▒▒▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▒▒▒▓▓▓▓▒▒▒▓▓▓▓▒▒▒▒▒▒▒▒▒░░▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▒▓▓▒▒
▒▓▒▒▓▓▓▒▓▒▓▓▓▓▓▓▓▓▓▓▓▓█▓▓▒▒▒▒▒▒▓▓▒▒▒▒▒▒▓▓▒▒▒▒▒▒▒▒▒▒▒░▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▒▓▓▓▓▓▒
▒▓▒▒▓▒▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▒▒▒▒▓▒▒▓▒▒▓▓▓▓▓▓▓▓▓▒▒▒▒▒▒▒░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒
▒▓▓▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▒▒░▒▓▓█▓▓▓█▓▓▓▓▓▓▓▓▓▓▒▒▒▒░▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▓▓▓▓▒
▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▒░░▒▓▓▓▓▓█▓█▓▓▓▓▓▓▓▓▒▒░▒░▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒░░▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▒▒░░▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▓▓▓▓▓▓
▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒░░░▒▒▓▓▓▓▓▓▒▒▒▓▓▓▓▒▒▒░░░░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒
▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒░░░▒▒▓▓▓▓▒▒▒▒▒▒▓▓▒▒░░░░▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒░░░▒▒▓▒▒▓▓▒▒▓▓▒▒▒▒░░░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▒░░▒▒▒▓▓▓▓▓▓▒▒▒░░░░░▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒░░▒▒▒▒▒▒▒▒▒▒▒░░░▒░░░▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▒░░▒▓▒░░░░░░░░░░░▒░▒▒▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒░▒▒░░░▓▓▓▒░░░░░░░░▒▓▓▒░▒▒▒▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒░░░░░▒▓▓▓▓▓▒░░▒▒░░▒▓▓▓▓▒░░░░▒░▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒░▒▒▒▓▓▒▒▓▓▓█▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▒░░░░░▒▒▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▒▒▓▓▓▒▒▒▓▓█▓███▓▓▓▓▓▓▓▓▓▓▓▒░▒▒░░▒▒░░▒░░░▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓
▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▒▒▒▒▒▓▒▒▒▒▒▒▒▓████████▓▓███▓▒░▒▒░▒▒▒▒░▒▒░▒▒░░░▒▓▓▓▓▓▓▓▓▓▓▓▓▓
▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▒▒▒▒▒▒▒▓▓▒▒▒▒▒▒▒▒▒▒▓▓███████▓▒▒▒▒▒░░▒▒▒▒▒▒▒▒▒░░▒░░░▒▓▓▓▓▓▓▓▓▓▓▓
▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▒▓▒▒▒▒▒▒▓▓▒▒▒▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░▒▒░▒▒▒▒▒▒▒▒▒▒▒▒░▒░░▒▓▓▓▓▓▓▓▓▓▓
▓▓▓▓▓▓▓▓▓▓▓▒▒▒▒▒▒▒▒▒▒▒▓▓▒▒▒▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▒▒▒▒▒▓▒▒▒▒▒▒▒░▒▒░░░▓▓▓▓▓▓▓▓▓
▓▓▓▓▓▓▓▓▓▓▒▒▒▒▒▒▒▒▒▒▒▓▓▒▒▒▓▓▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░▒▒░▒░▒▓▓▓▓▓▓▓▓
▒▓▓▓▓▓▓▓▓▒▒▒▒▒▒▒▒▒▒▒▓▓▒▒▒▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░▒▒░▒▒░░▓▓▓▓▓▓▓
▒▓▓▓▓▓▓▓▒▒▒▒▒▒▒▒▒▒▒▒▓▒░▒▓▓▒▓▓▒▒▒▒▒▒▒▒▒▒▒▒░░▒▒▒░▒▒░▒▒▒▒▒▒▒▒▒▒▒▒▓▒░▒▒▒░▒▒░░░▓▓▓▓▓▓
▓▓▓▓▓▓▓▒▒▒▒▒▒▒▒▒▒▒▒▓▒░▒▓▓▓▓▒▒▓▓▒▒▒▒▒▒▒▒░▒░▒▒▒░▒▒▒▒▒▒▒▒▒▒▒▓▒▒▒▒▒░▒▒▒░░▒▒░░░░▓▓▓▓▓
▒▓▓▓▓▓▓▒▒▒▒▒▒▒▒▒▒▓▓▒░░▓▓▓▓▒▒▒▒▒▒▒▒▒▒▒▒░░▒▒▒▒░▒▒▒▒░▒▓▒▒▒▒▒▓▒░▒▒▒▒▒▒░░░▒▒░░░░░▓▓▓▓
▒▓▓▓▓▓▒▒▒▒▒▒▒▒▒▒▒▓▓▒░▒▓▓▓▒▒▓▒▒▒▒▒▒░░░░▒░░░░▒▒▒▒▒░░▒▓▒▒▒▒▒▓▒▒▒▒▒▒▒░░▒▒▒░░░░░░▒▓▓▓
▒▓▓▓▓▒░▒▒░▒▒▒▒▒▒▓▓▒░▒▒▓▓▓▓▒▓▓▓▓▓▒▒▒▒▒▒▒░░▒▒▒▒▒▒░▒░░▓▒▒▒▒▒▒░▒▒▒▓▒▒▒▒▒▒▒▒░░░░░░▒▓▓
▒▓▓▓▒▒▒▒░▒▒▒▒▒▒▒▓░░▒▒▒▒▓▓▓▓▒▓▓▓▓▒▒░░░░▒▒▒▒▒▒▒▒░▒▒░▒▒▒▒▒▒▒▒▓▒▓▓▓▓▓▓▓▓▓▓▓▒▒▒▒▒▒▒▓▓
▒▓▓▒▒▒░░▒▒▒▒▒▒▓▓░░▒▒▒▒░▒▓▓▓▓▒▓▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒░▒▒▓█████████▓▓▓▓▓▓▓▓▓▓▓▓██████████
▒▓▒▒▒░░▒▒▒▒▒▓▒▒░░▒▒▒▒▒▒▒▓█▓▓▒▓▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒░▒▓███▓██████▓▓▓▓▓▓▓▓▓█████████████
▒▓▒▒░░▒▒▒▒░▒▓▒░░░▒▒▒░▒▒▒▓▓▓▓▒▒▒▒▒▒▒▒░░░░▒▒▒▒▒▓▓▓███▓▓▓▓▓▓▓▓▓▓▓▒▓▓█▓▓▓▓▓▓█▓▓▓▓███
▒▒▒░░▒▒▒▒▒▒▒▒░░░▒░░░░▒▓▓▓▓▓▒▒▒▒▒▒▒░░▒▒░▒▒▒░▒▒▓▓▓▓██▓▓█▓▓▓▓▓▓▓▓▓▓▓█▓▓▓▓█▓█▓▓▓████
▒▒▒░▒▒▒▒▒▒▓▒░░░░░░░▒▒▓▓▓▓▓▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓▓▓████████████▓▓▓▓███████████████
▒▒░▒▒▒▒▒▒▒░░░░▒▒▒░▒▒▒▓▓▓▓▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒░▒▒▒▒▓▓▓▓██▓▓▓██▓▓█▓▓▓▓▓▓█▓▓▓▓██▓▓▓▓▓███
▒░▒▒▒▒▒▒▒░░▒▒▒▒▒▒░▒▒▒▓▓▓▓▒░░▒▒▒░▒▒▒▒▒▒░▒▒░░░▒▓▓▓▓███████████████▓███████████████
░▒▒▒▒▒▒░░░▒▒▒░░▒▒▒▒▒▒▓▓▓▒░░░▒▒▒░░▒▒▒▒▒▒▒░░░░▒▓▓▓▓██▓▓▓▓▓█▓▓▓▓▓▓▓▓█▓█▓█▓▓▓▓▓▓▓▓██
▒▒▒▒▒▒░░▒░░▒▒░░▒▒░▒▒▒▒▓▒░░░░░▒░░░░▒▒▒▒░░░░▒▒▒▓▓▓▓██▓▓▓▓▓▓▓▓▓▓▓▓▓▓█▓▓▓█▓▓▓▓▓▓▓▓██
▒▒▒▒░░▒░▒░░▒▒░▒▒▒▒▒▒▒▒▒░░▒░░░░░░░░░░░░░▒░▒▒▒▒▓▓▓▓██▓███████████▓▓████████▓██████
░▒▒░░░░░░░░▒░░░▒▒▒▒▒▒░░░▒▒▒░░░▒▒▒▒▒▒▒▒▒▒▒░▒▒▒▓▓▓▓██▓▓▓▓▓▓▓▓▓▓▓▓▓▓█▓▓▓▓▓▓▓▓▓▓▓▓▓█
▒▒░░▒░░▒░░░░░░▒▒▒▒▒▒▒░░▒░▒▒░░░░▒░░░░▒▒▒▒▒▒▓▒▓▓▓▓▓████████████▓█▓████▓█▓▓█▓█▓▓▓██
▒▒░░░░░░░▒▒░░░▒▒▒▒▒▒▒░░░░▒▒░░░▒▒▒▒▒▒▒▒▒▒▒▓▓▒▓▓▓▓▓████████▓▓▓▓▓▓▓▓██▓▓█▓▓▓▓▓▓▓▓██
░░░░░▒░░▒▒░░▒░▒▒▒▒▒▒▒░░░░▒▒░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓▓▓██▓▓▓▓▓▓▓▓▓▓▓▓▒▓█▓▓▓▓▓▓▓▓▓▓▓▓▓█
░░░░░░░░▒▒░░▒░▒▒▒▒░▒▒░▒░░▒▒░░░░░░▒▒▒▒▒▒▒▒▒▒▒▒▓▓▓▓████▓████████▓▓▓▓██████▓▓▓██▓██
░░░░░░░▒▒▒░░▒▒▒▒▒▒▒▒▒░▒░░▒░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓▓██▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓█
░░░░░░░░░░░░▒░░▒▒▒▒░░░▒▒▒░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒░▒▒▓▓▓██▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓█▓▓▓▓▓▓▓
░░░░░░░▒▒▒░▒▒▒░░░░░░░▒▓▓▒▓▓▓▒▓▓▓▓▒▓▒▓▒▒▓░▓▒▓▓▓▓▓▓▓█▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓███▓▓████
░░░░░░░▒▒░░▒▒░░░░░░░░▒░▒▒▒▒▓▒▓▒▒▒▒▒▒▒▒▓▓▒▓▓▒▓▒▓▓▓▓▒▓▒▓▓▓▓▓▒▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
▒▒░░░░░░▒░░░▒▒░░░░░░░░░░▒▒▒░░░░░▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒░░░░░▒▒▒▒▒▒▒▒░░▒▒*/
#include <bits/stdc++.h>
#define fast std::cin.tie(0);std::ios_base::sync_with_stdio(0);
using namespace std;
typedef long long ll;
typedef long double ld;
typedef unsigned long long ull;
const ll RBN = 1e9+7;
const ll RSN = -(1e9+7);
const double PI = 3.141592653589793;
//mt19937_64 rnd(chrono::steady_clock::now().time_since_epoch().count()); ll gen(){return rnd()%100;}

struct Node
{
        ll index;
        Node* prev;
        Node* next;
};

struct List
{
    Node* top = nullptr;
    Node* bottom = nullptr;

    bool is_empty() {
        return top == nullptr;
    }

    void add(ll index) {
        Node *link = new Node;
        link->index = index;
        if (is_empty()) {
            top = bottom = link;
        } else {
        link->prev = top;
        top->next = link;
        top = link;
        }
    }

    void pop_top() {
        if (top == bottom) {
            Node *that_top = top;
            top = that_top -> next;
            delete that_top;
        }
        if (!is_empty()) {
            Node *that_top = top;
            top = top->prev;
            top->next = nullptr;
            delete that_top;
        }
    }
};
ll make_a_boat(ll array[], ll n, List my_list) {
    ll area = 0;
    for (ll i = 0; i <= n; i++){
        while (!(my_list.is_empty()) && (array[my_list.top->index] >= array[i] || n == i)) {
            ll height = array[my_list.top->index];
            my_list.pop_top();
            ll width;
            if (!(my_list.is_empty())) {
                    width = i - my_list.top->index - 1;
            }else{
                width = i;
            }
            ll new_area = width * height;
            area = max(area, new_area);
        }
        my_list.add(i);
    }
    return area;
}

signed main() {
    ll n;
    cin >> n;
    ll array[n];
    for(ll i = 0; i < n; i++){
        ll temp;
        cin >> temp;
        array[i] = temp;
    }
    List my_list;
    cout << make_a_boat(array, n, my_list);
    return 0;
}
